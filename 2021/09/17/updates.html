<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="twitter:card" content="summary">
    <meta name="description" content=".NET &#x95A2;&#x9023;&#x306E;&#x60C5;&#x5831;&#x3092;&#x307B;&#x307C;&#x9031;&#x520A;&#x914D;&#x4FE1;">
    <meta property="og:description" content=".NET &#x95A2;&#x9023;&#x306E;&#x60C5;&#x5831;&#x3092;&#x307B;&#x307C;&#x9031;&#x520A;&#x914D;&#x4FE1;">
    <meta name="author" content="Mayuki Sawatari">

  <title>2021-09-17: .NET 6 RC1, Visual Studio 2022 Preview 4, WinUI 2.7, Uno Platform 3.10 - WeekRef.NET</title>

  <link rel="canonical" href="https://weekref.net/2021/09/17/updates">

      <link type="application/atom+xml" rel="alternate" title="WeekRef.NET" href="/feed.atom" />
  
  <meta name="application-name" content="WeekRef.NET" />
  <meta name="msapplication-tooltip" content="WeekRef.NET" />
  <meta name="msapplication-starturl" content="/" />

  <meta property="og:title" content="2021-09-17: .NET 6 RC1, Visual Studio 2022 Preview 4, WinUI 2.7, Uno Platform 3.10 - WeekRef.NET" />
    <meta property="og:image" content="/img/logo.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://weekref.net/2021/09/17/updates" />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <!-- Bootstrap core CSS -->
  <link href="/vendor/bootstrap/scss/bootstrap.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="/vendor/fontawesome-free/css/brands.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css' data-no-mirror>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css' data-no-mirror>
  
  <!-- Custom styles for this template -->
  <link href="/scss/clean-blog.css" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.0.0/dist/quicklink.umd.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/themes/prism.css">

  <!-- Lunr search -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VMZ41K2L9M"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VMZ41K2L9M');
</script>


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">WeekRef.NET</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
    <li class="nav-item">
        <a class="nav-link" href="https://github.com/mayuki/WeekRef.NET">GitHub</a>
    </li>
</ul>
    </div>
  </div>
</nav>

  <!-- Page Header -->
  <header class="masthead">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="post-heading">
          <h1>
            2021-09-17: .NET 6 RC1, Visual Studio 2022 Preview 4, WinUI 2.7, Uno Platform 3.10
          </h1>
              <div class="meta">Published on Friday, 17 September 2021</div>
        </div>
      </div>
    </div>
  </div>
</header>

  <!-- Main Content -->
  <div class="container"> 
    <div class="row">
      <div id="content" class="col-md-12">  
        <!--
# yyyy-MM-dd
## 主なトピックス
## ヘッドライン
## アーティクル、スライドなど
## ライブラリ、リポジトリ、ツールなど
## サイト、ドキュメントなど
### ツイート
## Deep Dive
-->
<h2 id="section">主なトピックス</h2>
<p>.NET 6 RC 1 と Visual Studio 2022 Preview 4 がリリースされました。RC ということで若干の breaking changes はありますが GA に向けたステップといったリリースです。Preview から Go live ライセンスとなったのでプロダクション環境での利用が可能になります。</p>
<p>また、マルチプラットフォームアプリを作るためのフレームワーク MAUI は .NET 6 には入らないことなどがアナウンスされています。</p>
<ul>
<li><a href="https://devblogs.microsoft.com/dotnet/announcing-net-6-release-candidate-1/">Announcing .NET 6 Release Candidate 1 - .NET Blog</a></li>
<li><a href="https://devblogs.microsoft.com/visualstudio/visual-studio-2022-preview-4-is-now-available/">Visual Studio 2022 Preview 4 is now available! - Visual Studio Blog</a></li>
<li><a href="https://devblogs.microsoft.com/dotnet/update-on-dotnet-maui/">Update on .NET Multi-platform App UI (.NET MAUI) - .NET Blog</a></li>
</ul>
<p>Uno Platform 3.10 がリリースされました。.NET 6 RC1 への対応や Windows 11 のスタイルなどに対応したようです。</p>
<ul>
<li><a href="https://platform.uno/blog/uno-platform-3-10-day-0-support-for-net-6-rc1-winui-infobadge-windows-11-fluent-styles/">Uno Platform 3.10: Day-0 support for .NET 6 RC1, WinUI InfoBadge, Windows 11 Fluent Styles</a></li>
</ul>
<p>Silverlight のオープンソース代替実装、OpenSilver のベータがリリースされました。これは C#/WPF を Web 技術上で動かす CSHTML5 をベースとして Silverlight のコードを Web 技術上で動かすものです。Silverlight は2021年10月12日でサポート終了するため、その延命処置としてといった目的が大きそうです。</p>
<ul>
<li><a href="https://opensilver.net/announcements/introducing-opensilver.aspx">Introducing OpenSilver</a></li>
</ul>
<p>.NETのクラスライブラリ設計 改訂新版の予約が Amazon でできるようになりました。10月7日に発売だそうです。</p>
<ul>
<li><a href="https://www.amazon.co.jp/dp/4296080040">.NETのクラスライブラリ設計 改訂新版 (マイクロソフト関連書) | Krzysztof Cwalina、Jeremy Barton、Brad Abrams, 猪股 健太郎、河合 宜文 (監訳), 藤原 雄介 |本 | 通販 | Amazon</a></li>
</ul>
<h2 id="section-1">ヘッドライン</h2>
<h3 id="announcing.net-6-release-candidate-1.net-blog">Announcing .NET 6 Release Candidate 1 - .NET Blog</h3>
<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-6-release-candidate-1/">https://devblogs.microsoft.com/dotnet/announcing-net-6-release-candidate-1/</a></p>
<p>.NET 6 Release Candidate 1 がリリース。RC1 以降では機能の追加などから GA に向けて品質の向上にフォーカスする形。
また、このバージョンから &quot;go live&quot; ライセンスとなり実運用環境での使用がサポートされる。
Visual Studio 2022 Preview 4と共に使用することが前提で Visual Studio 2022 for Mac Preview 1 は追って対応。</p>
<p>記事ではソースからビルドすること(.NET 6 で tarball からビルドできるようになったなど)、Profile-guided optimization、Crossgen2、セキュリティー関連についてなどが触れられている。</p>
<ul>
<li><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-6-rc-1/">ASP.NET Core updates in .NET 6 Release Candidate 1 - ASP.NET Blog</a></li>
<li><a href="https://devblogs.microsoft.com/dotnet/update-on-dotnet-maui/">Update on .NET Multi-platform App UI (.NET MAUI) - .NET Blog</a></li>
</ul>
<h3 id="visual-studio-2022-preview-4-is-now-available-visual-studio-blog">Visual Studio 2022 Preview 4 is now available! - Visual Studio Blog</h3>
<p><a href="https://devblogs.microsoft.com/visualstudio/visual-studio-2022-preview-4-is-now-available/">https://devblogs.microsoft.com/visualstudio/visual-studio-2022-preview-4-is-now-available/</a></p>
<p>Visual Studio 2022 Preview 4 がリリース。</p>
<p>ファイル内検索が改善され、大きいソリューションなどでは3倍近く早くなった。</p>
<p>ブレークポイントの条件に &quot;Dependent Breakpoint&quot; という「特定のブレークポイントにかかっていた場合にブレークする」という設定の追加。ASP.NET での CSS 同期や MAUI サポートを初めとするホットリロード機能の強化。フォルダー階層と名前空間を合わせる &quot;Sync Namespaces&quot; の追加(ReSharper の Adjust Namespaces 相当)。</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#17.0.0-pre.4.0">Visual Studio 2022 Preview Release Notes | Microsoft Docs</a></li>
</ul>
<h3 id="update-on.net-multi-platform-app-ui.net-maui.net-blog">Update on .NET Multi-platform App UI (.NET MAUI) - .NET Blog</h3>
<p><a href="https://devblogs.microsoft.com/dotnet/update-on-dotnet-maui/">https://devblogs.microsoft.com/dotnet/update-on-dotnet-maui/</a></p>
<p>MAUI の状況と .NET MAUI Preview 8 について。</p>
<p>MAUI は開発状況的に .NET 6 の11月の GA には入らず、2022年の Q2 での GA を目指すとのこと。それまでは Xamarin の強化を行い、製品開発への採用は Xamarin を推奨する。.NET 6 GA の段階で必要な機能は提供するがしばらくはプレビューで品質向上と移行のための準備を進める。</p>
<p>また .NET 6 RC1 では &quot;Go Live&quot; だが、MAUI は除外され、RC2 で Preview となる。</p>
<p>Visual Studio 2022 Preview 4 の Mobile development with .NET ワークロードに MAUI が含まれるようになった。Windows デスクトップアプリケーションをターゲットにしたい場合には &quot;Desktop Development with .NET&quot;, &quot;UWP&quot;, &quot;Desktop Development with C++&quot; ワークロードも必要。</p>
<p>また、XAML のホットリロードにも対応し、Windows をはじめ iOS, Android でも同様に動作する。</p>
<p>.NET MAUI SDK はアップデートで ASP.NET Core などと同様に .NET Host Builder パターンを使用するようになった。</p>
<h3 id="winui-2.7-release-notes-windows-apps-microsoft-docs">WinUI 2.7 Release Notes - Windows apps | Microsoft Docs</h3>
<p><a href="https://docs.microsoft.com/en-us/windows/apps/winui/winui2/release-notes/winui-2.7">https://docs.microsoft.com/en-us/windows/apps/winui/winui2/release-notes/winui-2.7</a></p>
<p>Windows UI Library 2.7 がリリース。</p>
<p>InfoBadge コントロール、ColorPicker の方向設定(横置き)の追加。</p>
<ul>
<li><a href="https://github.com/microsoft/microsoft-ui-xaml/releases/tag/v2.7.0">Release Microsoft.UI.Xaml 2.7.0 · microsoft/microsoft-ui-xaml</a></li>
</ul>
<h3 id="net-september-2021-updates-5.0.10-and-3.1.19.net-blog">.NET September 2021 Updates – 5.0.10 and 3.1.19 - .NET Blog</h3>
<p><a href="https://devblogs.microsoft.com/dotnet/september-2021-updates/">https://devblogs.microsoft.com/dotnet/september-2021-updates/</a></p>
<p>.NET 5.0.10 と 3.1.19 がリリース。</p>
<p>セキュリティーアップデートを含まない、信頼性やその他バグ修正等の改善。</p>
<p>.NET 5 の Runtime には <code>GCConserveMemory</code> という GC の設定が追加された。<code>GCConserveMemory</code> は Gen 2 で意味のある生きたデータの割合の閾値で設定値として 1-9 をとる。例えば 3 を指定した場合には Gen 2 にあるべきデータは 30% となり、これによってフラグメンテーションが 70% 以上になるとよりブロッキング Gen 2 GC が実行される(つまり大きい値を指定すると Gen 2 をコンパクトに保とうとする)。</p>
<ul>
<li><a href="https://github.com/dotnet/announcements/issues/200">September 2021 .NET Updates · Issue #200 · dotnet/announcements</a></li>
<li><a href="https://github.com/dotnet/runtime/pull/48601">Fix high frag in gen2 by PeterSolMS · Pull Request #48601 · dotnet/runtime</a></li>
</ul>
<h3 id="uno-platform-3.10-day-0-support-for.net-6-rc1-winui-infobadge-windows-11-fluent-styles">Uno Platform 3.10: Day-0 support for .NET 6 RC1, WinUI InfoBadge, Windows 11 Fluent Styles</h3>
<p><a href="https://platform.uno/blog/uno-platform-3-10-day-0-support-for-net-6-rc1-winui-infobadge-windows-11-fluent-styles/">https://platform.uno/blog/uno-platform-3-10-day-0-support-for-net-6-rc1-winui-infobadge-windows-11-fluent-styles/</a></p>
<p>Uno Platform 3.10 がリリース。</p>
<p>.NET 6 RC1 への対応や Windows 11 のスタイルなどに対応、WinUI に追加された InfoBadge への対応など。多くの改善と修正、サンプルコードの追加が行われた。</p>
<ul>
<li><a href="https://github.com/unoplatform/uno/releases/tag/3.10.7">Release 3.10.7 · unoplatform/uno</a></li>
</ul>
<h3 id="http3-enable-in-kestrel-by-default-in.net-7-issue-36486-dotnetaspnetcore">HTTP/3: Enable in Kestrel by default in .NET 7 · Issue #36486 · dotnet/aspnetcore</h3>
<p><a href="https://github.com/dotnet/aspnetcore/issues/36486">https://github.com/dotnet/aspnetcore/issues/36486</a></p>
<p>.NET 7 で Kestrel の HTTP/3 サポートがデフォルトで有効になる予定。</p>
<h3 id="introducing-opensilver">Introducing OpenSilver</h3>
<p><a href="https://opensilver.net/announcements/introducing-opensilver.aspx">https://opensilver.net/announcements/introducing-opensilver.aspx</a></p>
<p>Silverlight のオープンソース代替実装、OpenSilver のベータがリリース。</p>
<p>C#/WPF を Web 技術上で動かす CSHTML5 をベースとして Silverlight のコードを Web 技術上で動かすツールキット。</p>
<ul>
<li><a href="https://github.com/OpenSilver/OpenSilver">OpenSilver/OpenSilver: This repository contains the source of both OpenSilver and CSHTML5. More information is available at: www.opensilver.net and www.cshtml5.com - Read README.md for the instructions on how to build the source code and how to test it.</a></li>
<li><a href="https://support.microsoft.com/ja-jp/windows/silverlight-%E3%81%AE%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E7%B5%82%E4%BA%86%E6%97%A5-0a3be3c7-bead-e203-2dfd-74f0a64f1788">Silverlight のサポート終了日</a></li>
</ul>
<h3 id="open-sourcing-the.net-5-c-language-extension-for-sql-server-microsoft-sql-server-blog">Open sourcing the .NET 5 C# Language Extension for SQL Server - Microsoft SQL Server Blog</h3>
<p><a href="https://cloudblogs.microsoft.com/sqlserver/2021/09/08/open-sourcing-the-net-5-c-language-extension-for-sql-server/">https://cloudblogs.microsoft.com/sqlserver/2021/09/08/open-sourcing-the-net-5-c-language-extension-for-sql-server/</a></p>
<p>SQL Server 2019 から利用できる外部コードを実行することで様々な言語を呼び出せる仕組みで .NET 5 / C# を使用する拡張がオープンソースで公開された。</p>
<ul>
<li><a href="https://blog.engineer-memo.com/2021/09/12/sql-server-2019-on-windows-%E3%81%AE-language-extension-%E3%81%A7-net-5-c-%E3%81%8C%E5%8B%95%E4%BD%9C%E3%81%99%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F/">SQL Server 2019 on Windows の Language Extension で .NET 5 C# が動作するようになりました at SE の雑記</a></li>
<li><a href="https://docs.microsoft.com/ja-jp/sql/language-extensions/language-extensions-overview?view=sql-server-ver15">SQL Server 言語拡張とは? | Microsoft Docs</a></li>
<li><a href="https://github.com/microsoft/sql-server-language-extensions/tree/main/language-extensions/dotnet-core-CSharp">sql-server-language-extensions/language-extensions/dotnet-core-CSharp at main · microsoft/sql-server-language-extensions</a></li>
</ul>
<h3 id="release-1.4.0-beta.3-mysql-netmysqlconnector">Release 1.4.0-beta.3 · mysql-net/MySqlConnector</h3>
<p><a href="https://github.com/mysql-net/MySqlConnector/releases/tag/1.4.0-beta.3">https://github.com/mysql-net/MySqlConnector/releases/tag/1.4.0-beta.3</a></p>
<p>Async MySQL Connector の 1.4.0-beta.3 がリリース。</p>
<p>1.4.0 シリーズでは .NET 6 のサポートの追加や、netstandard1.3 のサポートの削除などが行われている。</p>
<h3 id="release-v5.0.10-npgsqlnpgsql">Release v5.0.10 · npgsql/npgsql</h3>
<p><a href="https://github.com/npgsql/npgsql/releases/tag/v5.0.10">https://github.com/npgsql/npgsql/releases/tag/v5.0.10</a></p>
<p>Npgsql 5.0.10 がリリース。</p>
<p>様々な不具合の修正と、<code>xid8</code> データ型のサポートの追加など。</p>
<h3 id="security-bulletin-announcements-travis-ci-community">Security Bulletin - Announcements - Travis CI Community</h3>
<p><a href="https://travis-ci.community/t/security-bulletin/12081">https://travis-ci.community/t/security-bulletin/12081</a></p>
<p>Travis CI の脆弱性について。パブリックなリポジトリをフォークした先で PR を作った際に元リポジトリの Secrets が露出してしまう問題があった。</p>
<p>経緯や対応方法は下記の記事が詳しいので Travis CI を使用していた場合には対応が推奨。</p>
<ul>
<li><a href="https://zenn.dev/azu/articles/110528f8963686">Travis CIのGitHub連携を停止する方法</a></li>
</ul>
<h2 id="section-2">アーティクル、スライドなど</h2>
<h3 id="introducing-package-source-mapping-the-nuget-blog">Introducing Package Source Mapping - The NuGet Blog</h3>
<p><a href="https://devblogs.microsoft.com/nuget/introducing-package-source-mapping/">https://devblogs.microsoft.com/nuget/introducing-package-source-mapping/</a></p>
<p>複数の NuGet パッケージソースを持つ場合に特定のパッケージやパッケージ名のパターンでどのパッケージソースを使用するか指定できる機能についての記事。</p>
<p>例えば特定の名前のパッケージ(<code>Contoso</code> や <code>Contoso.*</code>)は常に社内の NuGet パッケージレジストリを使うといったことが可能となる。</p>
<p>Visual Studio 2022 Preview 4 または nuget.exe 6.0.0-preview.4 または .NET SDK 6.0.100-rc.1 (.NET 6 RC1) 以降が必要。</p>
<h3 id="reflection-via-source-generators">Reflection via source generators</h3>
<p><a href="https://dev.to/byme8/aot-reflection-4ijb">https://dev.to/byme8/aot-reflection-4ijb</a></p>
<p>Source Generator でリフレクションで取得するようなものをあらかじめ生成しておくことでリフレクションのようなことをする場合でもパフォーマンスを稼げるのではないかというアイデアの記事。</p>
<ul>
<li><a href="https://github.com/byme8/Apparatus.AOT.Reflection">byme8/Apparatus.AOT.Reflection</a></li>
</ul>
<h3 id="cidisposableusingdispose">C#でIDisposableをusingしたのにDisposeしてくれない件</h3>
<p><a href="http://makiuchi-d.github.io/2021/09/16/csharp-using-idisposable.ja.html">http://makiuchi-d.github.io/2021/09/16/csharp-using-idisposable.ja.html</a></p>
<p>場合によっては <code>try-finally</code> の <code>finally</code> が呼び出されないことがあるという話。</p>
<p>通常例外がエントリーポイントまでさかのぼって <code>catch</code> されなかった場合、「ハンドルされていない例外 (Unhandled Exception)」となりアプリケーションが終了される。その際、一番外側でも <code>catch</code> がない場合 <code>finally</code> が実行されない可能性がある。</p>
<pre><code class="language-csharp">static void Main(string[] args)
{
    try
    {
        try
        {
            throw new Exception();
        }
        finally
        {
            // 実行される
            Console.WriteLine(&quot;Finally2&quot;);
        }
    }
    catch (Exception e)
    {
        // ここで throw すると結局 Unhandled Exception となるので try-catch-finally の finally は実行されない可能性がある
        throw;
    }
    finally
    {
        // 実行されない可能性がある
        Console.WriteLine(&quot;Finally&quot;);
    }
}
</code></pre>
<p>大抵はユーザーコードにたどり着くまでにフレームワークのどこかで try-catch が含まれているので問題にならないが、素のコンソールアプリケーションや Top-level Statements などで、<code>using</code> / <code>using var</code> を利用している場合等で問題になる可能性がある。</p>
<ul>
<li><a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/try-finally">try-finally - C# リファレンス | Microsoft Docs</a></li>
</ul>
<h3 id="system.diagnostics.metrics-api-qiita">計量的な統計を扱うためのSystem.Diagnostics.Metrics API - Qiita</h3>
<p><a href="https://qiita.com/skitoy4321/items/ae506268fb18fc2ac54d">https://qiita.com/skitoy4321/items/ae506268fb18fc2ac54d</a></p>
<p>.NET 6 で追加される System.Diagnosics.Metrics API についての記事。API の概要とシナリオ、実際の使い方などを解説。</p>
<h3 id="web-api-openapi-httprepl">Web API (OpenAPI) の探索やテストに便利な HttpRepl を使ってみた</h3>
<p><a href="https://zenn.dev/08thse/articles/47-tool-httprepl">https://zenn.dev/08thse/articles/47-tool-httprepl</a></p>
<p>.NET Tools として提供されている HTTP を REPL のような形で操作できる HttpRepl の使い方の記事。</p>
<h3 id="apples-in-maui">Apples in MAUI</h3>
<p><a href="https://www.telerik.com/amp/apples-maui/WEx1ZE1sRUVUWkE5S0dNbEhBNXJyUkU3T1Q4PQ2">https://www.telerik.com/amp/apples-maui/WEx1ZE1sRUVUWkE5S0dNbEhBNXJyUkU3T1Q4PQ2</a></p>
<p>MAUI で iOS アプリケーションを動かすまでの macOS 開発環境でのステップバイステップ。</p>
<h3 id="section-3">[雑記] コンパイル結果に影響を及ぼす属性</h3>
<p><a href="https://ufcpp.net/study/csharp/start/miscreservedattribute/">https://ufcpp.net/study/csharp/start/miscreservedattribute/</a></p>
<p><code>AttributeUsage</code> や <code>Conditional</code>, <code>Obsolete</code> など実行時に属性を解釈するのではなくコンパイル時にコンパイラーが知るためにある属性についての記事。</p>
<p><code>NullableContext</code> のようなコンパイラーが生成する属性についても。</p>
<h3 id="api-versioning-in-asp.net-core.net-core-tutorials">API Versioning in ASP.net Core - .NET Core Tutorials</h3>
<p><a href="https://dotnetcoretutorials.com/2017/01/17/api-versioning-asp-net-core/">https://dotnetcoretutorials.com/2017/01/17/api-versioning-asp-net-core/</a></p>
<p>ASP.NET Core で API のバージョニングを実現する Microsoft.AspNetCore.Mvc.Versioning の使い方についての記事。</p>
<ul>
<li><a href="https://qiita.com/alicial/items/f095ef52c5677abc3f7e">.NETCoreでアクション別のバージョン管理 - Qiita</a></li>
</ul>
<h3 id="net5.0rest-apiaws-codepipelineecs-qiita">.NET5.0製のREST APIサーバーを、AWS CodePipelineでビルドしてコンテナ化してECSでデプロイする。 - Qiita</h3>
<p><a href="https://qiita.com/tricrow/items/dad78c99cb77c7c6be9b">https://qiita.com/tricrow/items/dad78c99cb77c7c6be9b</a></p>
<p>.NET 5 アプリケーションを AWS CodePipeline/CodeBuild でビルドして、ARM (Graviton) な ECS インスタンスで動かすという話。</p>
<h3 id="debugging-a.net-app-on-linux-from-windows-visual-studio-with-wsl-ndepend">Debugging a .NET App on Linux from Windows Visual Studio with WSL - NDepend</h3>
<p><a href="https://blog.ndepend.com/debugging-a-net-app-on-linux-from-windows-visual-studio-with-wsl">https://blog.ndepend.com/debugging-a-net-app-on-linux-from-windows-visual-studio-with-wsl</a></p>
<p>Visual Studio から .NET 5 アプリケーションを WSL 2 上の Linux で動かしてデバッグするための手順についての記事。</p>
<p>.NET Framework のアプリを移植してきた場合、<code>DebugType</code> が <code>full</code> となっている場合があるので <code>portable</code> にするようにといった話も。</p>
<ul>
<li><a href="https://docs.microsoft.com/ja-jp/visualstudio/debugger/debug-dotnet-core-in-wsl-2?view=vs-2019">Linux で WSL を使用して .NET アプリをデバッグする - Visual Studio (Windows) | Microsoft Docs</a></li>
</ul>
<h3 id="socks-proxy-support-in.net.net-core-tutorials">SOCKS Proxy Support In .NET - .NET Core Tutorials</h3>
<p><a href="https://dotnetcoretutorials.com/2021/07/11/socks-proxy-support-in-net/">https://dotnetcoretutorials.com/2021/07/11/socks-proxy-support-in-net/</a></p>
<p>.NET 6 で　SOCKS プロキシーに対応したのでその使用方法についての記事。</p>
<ul>
<li><a href="https://github.com/dotnet/runtime/pull/48883">SOCKS4/4a/5 proxy support in SocketsHttpHandler by huoyaoyuan · Pull Request #48883 · dotnet/runtime</a></li>
</ul>
<h3 id="looking-inside-configurationmanager-in.net-6-exploring.net-core-6-part-1">Looking inside ConfigurationManager in .NET 6: Exploring .NET Core 6 - Part 1</h3>
<p><a href="https://andrewlock.net/exploring-dotnet-6-part-1-looking-inside-configurationmanager-in-dotnet-6/">https://andrewlock.net/exploring-dotnet-6-part-1-looking-inside-configurationmanager-in-dotnet-6/</a></p>
<p>ConfigurationBuilder の代わりとなる .NET 6 で導入された ConfigurationManager についての違いと利点などについての記事。</p>
<p>ConfigurationManager は <code>IConfigurationBuilder</code> を実装しているが ConfigurationBuilder と異なり、設定ソースの追加と削除が行われた時点で設定が確定するため部分的な取り出しが簡単になっている (<code>IConfigurationRoot</code> を実装していて自身を返すだけになっている)。<code>ConfigurationBuilder</code> は一度 <code>Build</code> しないと読めないため、設定に依存する設定がある場合の取り回しが悪かった。</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.configurationmanager?view=dotnet-plat-ext-6.0">ConfigurationManager Class (Microsoft.Extensions.Configuration) | Microsoft Docs</a></li>
</ul>
<h3 id="web.net-maui-essentialsxamarin.essentials-1.7">新たなWeb認証オプションと.NET MAUI Essentialsを加えたXamarin.Essentials 1.7</h3>
<p><a href="https://www.infoq.com/jp/news/2021/09/xamarin-essentials-1-7/">https://www.infoq.com/jp/news/2021/09/xamarin-essentials-1-7/</a></p>
<p>Xamarin.Essentials 1.7 についての記事。Web 認証と MAUI 対応について。</p>
<h3 id="backend-for-frontend-authentication-pattern-with-auth0-and-asp.net-core">Backend For Frontend Authentication Pattern with Auth0 and ASP.NET Core</h3>
<p><a href="https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/">https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/</a></p>
<p>Backend for Frontend (BFF) のような構成で Auth0 と ASP.NET Core を使った認証実装パターンについての記事。</p>
<h3 id="minimal-apis-at-a-glance-in.net-6">Minimal APIs at a glance in .NET 6</h3>
<p><a href="https://www.hanselman.com/blog/minimal-apis-at-a-glance-in-net-6">https://www.hanselman.com/blog/minimal-apis-at-a-glance-in-net-6</a></p>
<p>.NET 6 (ASP.NET Core) の Minimal API を使用したサンプルコードの記事。</p>
<h2 id="section-4">ライブラリ、リポジトリ、ツールなど</h2>
<h3 id="egorbostaticpgo_example-how-to-collect-a-static-not-the-dynamic-one-pgo-and-re-use-it-during-dotnet-publish">EgorBo/StaticPGO_Example: How to collect a static (not the dynamic one) PGO and re-use it during &quot;dotnet publish&quot;</h3>
<p><a href="https://github.com/EgorBo/StaticPGO_Example">https://github.com/EgorBo/StaticPGO_Example</a></p>
<p>.NET 6 の Static PGO を試すためのサンプルリポジトリ。</p>
<h3 id="mayukikokuban-simplifies-styling-strings-in-the-terminal-for.net-application">mayuki/Kokuban: Simplifies styling strings in the terminal for .NET application</h3>
<p><a href="https://github.com/mayuki/Kokuban">https://github.com/mayuki/Kokuban</a></p>
<p>コンソールに表示される文字列に対して色や下線など装飾を行うためのライブラリ。</p>
<h3 id="mayukichell-write-scripts-with-the-power-of-c-and.net">mayuki/Chell: Write scripts with the power of C# and .NET</h3>
<p><a href="https://github.com/mayuki/Chell">https://github.com/mayuki/Chell</a></p>
<p>シェルスクリプトのような作業を C# でも書きやすくするためのプロセス実行とユーティリティのライブラリ。</p>
<h2 id="section-5">サイト、ドキュメントなど</h2>
<h3 id="scott-hanselman-shanselman-tiktok-watch-scott-hanselmans-newest-tiktok-videos">Scott Hanselman (&#64;shanselman) TikTok | Watch Scott Hanselman's Newest TikTok Videos</h3>
<p><a href="https://www.tiktok.com/&#64;shanselman">https://www.tiktok.com/&#64;shanselman</a></p>
<p>Scott Hanselman の TikTok。</p>
<h3 id="net-krzysztof-cwalinajeremy-bartonbrad-abrams-amazon">.NETのクラスライブラリ設計 改訂新版 (マイクロソフト関連書) | Krzysztof Cwalina、Jeremy Barton、Brad Abrams, 猪股 健太郎、河合 宜文 (監訳), 藤原 雄介 |本 | 通販 | Amazon</h3>
<p><a href="https://www.amazon.co.jp/dp/4296080040">https://www.amazon.co.jp/dp/4296080040</a></p>
<p>.NETのクラスライブラリ設計 改訂新版の発売日が10月7日となり、Amazon での予約が開始。</p>
<h3 id="section-6">ツイート</h3>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">New create option in <a href="https://twitter.com/AzureFunctions?ref_src=twsrc%5Etfw">&#64;AzureFunctions</a> to create apps with .NET 6 🎉 <br><br>Go give it a try! <a href="https://t.co/El855SLeGM">pic.twitter.com/El855SLeGM</a></p>&mdash; Jeff Hollan (&#64;jeffhollan) <a href="https://twitter.com/jeffhollan/status/1436422895350153217?ref_src=twsrc%5Etfw">September 10, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Azure Functions で .NET 6 が Preview という形で使用できるように(これまでは Early Preview 扱い)。</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Your binlogs will be smaller and your builds will be faster! <a href="https://t.co/uEhA1t3zIE">https://t.co/uEhA1t3zIE</a></p>&mdash; Kirill Osenkov (&#64;KirillOsenkov) <a href="https://twitter.com/KirillOsenkov/status/1395510072348868609?ref_src=twsrc%5Etfw">May 20, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>MSBuild が 16.10 で文字列の dedup するようになって binlog が小さくなって、ビルドが速くなったという話。他にも binlog にファイルを埋め込めるようになった等の改善点など。</p>
<ul>
<li><a href="https://github.com/dotnet/msbuild/pull/6017">Deduplicate strings in binlogs by KirillOsenkov · Pull Request #6017 · dotnet/msbuild</a></li>
<li><a href="https://github.com/dotnet/msbuild/pull/6339">Add support for embedding arbitrary files into binlog by KirillOsenkov · Pull Request #6339 · dotnet/msbuild</a></li>
</ul>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Optimized version 🏎️<br>If build time only is enough for your codegen, you can still use RegisterForSyntaxNotifications and detect build time by checking entry assembly != null <a href="https://t.co/fXKdxTSzSA">https://t.co/fXKdxTSzSA</a><br>By doing so, your codegen will have *zero* impact at IDE time/keystrokes! 😎 <a href="https://t.co/HZx3VObLlB">pic.twitter.com/HZx3VObLlB</a></p>&mdash; Alexandre Mutel (&#64;xoofx) <a href="https://twitter.com/xoofx/status/1437054965789470729?ref_src=twsrc%5Etfw">September 12, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Source Generator から <code>Assembly.GetEntryAssembly()</code> が <code>null</code> かどうかを調べることで IDE 上で動いているかどうか確認できるので、ビルド時にのみ実行したい Source Generator を作る場合には使えるというテクニック。</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">For 17.0, we have fully NGEN&#39;d most major assemblies, most of which is in Preview 4, with a trailing set of assemblies in a future preview.</p>&mdash; David Kean (&#64;davkean) <a href="https://twitter.com/davkean/status/1438027246623547394?ref_src=twsrc%5Etfw">September 15, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Visual Studio が 64bit になったことでアドレス空間に余裕ができた。例えばアドレス空間を節約するため NGEN の対象はよく使われるコードパスのもののみに絞っていた(のでたまに JIT が走る)が、主要なアセンブリの大半を NGEN できるようになったという話。</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://t.co/4PmXMQN7SX">https://t.co/4PmXMQN7SX</a> Core SignalR is one of the things I&#39;m most proud of engineering wise. Lots of lessons were learnt building the first version that went into building its successor. Here is an example of native IAsyncEnumerable&lt;T&gt; streaming <a href="https://twitter.com/hashtag/dotnet?src=hash&amp;ref_src=twsrc%5Etfw">#dotnet</a> <a href="https://twitter.com/hashtag/signalr?src=hash&amp;ref_src=twsrc%5Etfw">#signalr</a> <a href="https://t.co/7wEmonu6Zp">pic.twitter.com/7wEmonu6Zp</a></p>&mdash; David Fowler 🇧🇧💉💉 (&#64;davidfowl) <a href="https://twitter.com/davidfowl/status/1437994847252606978?ref_src=twsrc%5Etfw">September 15, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>SignalR の Hub は <code>IAsyncEnumerable&lt;T&gt;</code> をサポートしているのでデータのストリーミングできるという話。</p>
<h2 id="deep-dive">Deep Dive</h2>
<h3 id="add-initial-regex-source-generator-by-stephentoub-pull-request-59186-dotnetruntime">Add initial regex source generator by stephentoub · Pull Request #59186 · dotnet/runtime</h3>
<p><a href="https://github.com/dotnet/runtime/pull/59186">https://github.com/dotnet/runtime/pull/59186</a></p>
<p>Regex の Source Generator の初期実装のPR。</p>
<p>Source Generator であらかじめ正規表現マッチ用のコードを生成しておくことでパフォーマンスを向上することが目的。
現時点では <code>RegexOptions.Compiled</code> のコードを流用して、C# の Regex のマッチ用のコードを生成する形。</p>
<h3 id="need-to-run-non-english-text-through-utf8encoding-for-pgo-scenarios-issue-57698-dotnetruntime-github">Need to run non-English text through UTF8Encoding for PGO scenarios · Issue #57698 · dotnet/runtime · GitHub</h3>
<p><a href="https://github.com/dotnet/runtime/issues/57698">https://github.com/dotnet/runtime/issues/57698</a></p>
<p>.NET 6 で PGO をかけた結果 UTF8Encoding が遅くなってしまうケースが発生しているという話。</p>
<p>Non-English なテキストを処理するようなデータでプロファイルしていないため、ギリシャ語やキリル文字を処理するようなケースでパフォーマンスが若干低下している。多分日本語も該当する可能性がある。コアライブラリは元から PGO で最適化された R2R の形式で出荷されているので影響を受ける。</p>
<ul>
<li><a href="https://github.com/dotnet/runtime/issues/52313">[Perf] Regressions in System.Text.Perf_Utf8Encoding for Greek and Cyrillic · Issue #52313 · dotnet/runtime</a></li>
</ul>
<h3 id="add-freebsd-rids-to-known-targets-by-josteink-pull-request-11972-dotnetinstaller">Add FreeBSD RIDs to known targets by josteink · Pull Request #11972 · dotnet/installer</h3>
<p><a href="https://github.com/dotnet/installer/pull/11972">https://github.com/dotnet/installer/pull/11972</a></p>
<p>インストーラーが知っている Runtime Identifier に FreeBSD が追加することでインストールできるようにする PR。</p>
<h3 id="support-multi-targeting-for-roslyn-components-by-eerhardt-pull-request-20793-dotnetsdk">Support multi-targeting for Roslyn components by eerhardt · Pull Request #20793 · dotnet/sdk</h3>
<p><a href="https://github.com/dotnet/sdk/pull/20793">https://github.com/dotnet/sdk/pull/20793</a></p>
<p>Roslyn のバージョンが Visual Studio 2019 (Roslyn 3.10) と 2022 (Roslyn 4.0) という形で複数ある都合、読み込むものを分けられるようにするという PR (マルチターゲット化)。</p>
<ul>
<li><a href="https://github.com/dotnet/sdk/issues/20355">Support multi-targeting for Roslyn components · Issue #20355 · dotnet/sdk · GitHub</a></li>
</ul>
<h3 id="marshal.allochglobalfreehglobal-is-150x-slower-in.net-than-legacy-mono-on-device-tvos-issue-58939-dotnetruntime">Marshal.AllocHGlobal/FreeHGlobal is ~150x slower in .NET than legacy mono on device (tvOS) · Issue #58939 · dotnet/runtime</h3>
<p><a href="https://github.com/dotnet/runtime/issues/58939">https://github.com/dotnet/runtime/issues/58939</a></p>
<p>tvOS で Marshal.AllocHGlobal/FreeHGlobal が急激に遅くなったのだけどなぜ?という話。レガシー Mono では問題なかったが .NET ではとても遅い、となっているが実際はランタイム自体はどちらも Mono で .NET 6 世代で <code>Marshal.AllocHGlobal</code> の実装が .NET の <code>NativeMemory.Alloc</code> に変わった影響。</p>
<p>Mono の固有実装と異なり素直に P/Invoke を使うようになった影響で P/Invoke 呼び出しの GC セーフにするための処理でオーバーヘッドが生まれてしまった。</p>
<h3 id="api-proposal-add-arm64-to-processorarchitecture-and-imagefilemachine-enums-issue-58970-dotnetruntime">[API Proposal]: Add Arm64 to ProcessorArchitecture and ImageFileMachine enums · Issue #58970 · dotnet/runtime</h3>
<p><a href="https://github.com/dotnet/runtime/issues/58970">https://github.com/dotnet/runtime/issues/58970</a></p>
<p><code>ProcessorArchitecture</code> と <code>ImageFileMachine</code> に ARM64 の値がないので増やしたいという提案。
ところがそもそもこの値は .NET Core/.NET 5 以降では事実上の非推奨でほぼ機能しておらず、むしろ <code>AssemblyName</code> にある <code>ProcessorArchitecture</code> は Obsolete にしたいという話に。</p>
<ul>
<li><a href="https://github.com/dotnet/runtime/issues/59061">Obsolete thumbtacked AssemblyName properties · Issue #59061 · dotnet/runtime</a></li>
</ul>
<h3 id="create-using-alias-types.md-by-cyrusnajmabadi-pull-request-5174-dotnetcsharplang">Create using-alias-types.md by CyrusNajmabadi · Pull Request #5174 · dotnet/csharplang</h3>
<p><a href="https://github.com/dotnet/csharplang/pull/5174">https://github.com/dotnet/csharplang/pull/5174</a></p>
<p>名前を持つ型に対するエイリアスとして <code>using A = Foo.Bar.Baz;</code> はできるが、<code>using Position = (int X, int Y);</code> のようなタプルや配列型、ポインター型などに対するエイリアスは定義できないので定義できるようにする提案。</p>
<h3 id="proposal-event-hookup-in-object-initializer-issue-5176-dotnetcsharplang">[Proposal]: Event hookup in object initializer · Issue #5176 · dotnet/csharplang</h3>
<p><a href="https://github.com/dotnet/csharplang/issues/5176">https://github.com/dotnet/csharplang/issues/5176</a></p>
<p>オブジェクト初期化子で event ハンドラーをセットできてもいいのではないかという提案。</p>


      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->  
  <footer>
    <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted m-0">Copyright &#xA9; Mayuki Sawatari &lt;mayuki@misuzilla.org&gt;</p>
                    <br />
                    <ul class="list-inline text-center small">
                            <li class="list-inline-item">
                                <a href="/feed.atom"><i class="fa fa-rss"></i> Feed</a>
                            </li>
                    </ul>
                    <br />
                    <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
                </div>
        </div>
    </div>
</footer>

  <!-- Bootstrap core JavaScript -->
  <script src="/vendor/jquery/jquery.min.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  


  

  <!-- Custom scripts for this template -->
  <script src="/js/clean-blog.js"></script>

</body>

</html>
